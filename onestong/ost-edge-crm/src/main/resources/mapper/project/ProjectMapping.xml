<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="org.ost.crm.dao.project.ProjectDao">


	<delete id="deleteProjectSteps">
		delete from tbl_project_steps
		where schemaID =
		#{schemaId}
		and projectID = #{projectId}
	</delete>

	<select id="selectProjectSteps" resultType="org.ost.entity.project.ProjectTypeStep">
		select
		tpts.*

		from tbl_project tp left join
		tbl_project_steps tps on

		(tp.id,tp.schemaID) =
		(tps.projectID,tps.schemaID)

		left join
		tbl_project_type_step tpts

		on
		(tps.projectTypeStepID,tps.schemaID) =
		(tpts.id,tpts.schemaID)

		<where>
			tp.id = #{projectId} and tp.schemaID=#{schemaId} order by
			tpts.step
			asc
		</where>

	</select>
</mapper>